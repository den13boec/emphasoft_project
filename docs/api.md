# API Документация

## Базовый URL

```
http://127.0.0.1:8000/api/
```

## Аутентификация

### Регистрация

**URL:** `/auth/register/`

**Метод:** `POST`

**Описание:** Регистрирует нового пользователя.

**Пример запроса:**

```json
{
    "username": "newuser",
    "password": "password123"
}
```

**Пример ответа:**

```json
{
    "username": "newuser"
}
```

### Авторизация

**URL:** `/auth/login/`

**Метод:** `POST`

**Описание:** Авторизует пользователя и возвращает токен.

**Пример запроса:**

```json
{
    "username": "newuser",
    "password": "password123"
}
```

**Пример ответа:**

```json
{
    "token": "your_token_value"
}
```

## Комнаты

### Просмотр комнат

**URL:** `/rooms/`

**Метод:** `GET`

**Описание:** Возвращает список всех доступных комнат. Доступно без авторизации.

**Пример ответа:**

```json
[
    {
        "id": 1,
        "room": "Room 1",
        "price_per_night": "100.00",
        "capacity": 2
    },
    {
        "id": 2,
        "room": "Room 2",
        "price_per_night": "150.00",
        "capacity": 3
    }
]
```

### Фильтрация и сортировка комнат

**Параметры запроса:**

- `min_price` (number): Минимальная цена за ночь.
- `max_price` (number): Максимальная цена за ночь.
- `min_capacity` (number): Минимальное количество мест.
- `max_capacity` (number): Максимальное количество мест.
- `ordering` (string): Поле для сортировки (доступные поля: `price_per_night`, `capacity`). Для сортировки по убыванию добавьте `-` перед именем поля.

**Примеры запросов:**

1. Фильтрация по минимальной цене:
   ```
   GET /rooms/?min_price=100
   ```

2. Фильтрация по максимальной цене:
   ```
   GET /rooms/?max_price=200
   ```

3. Фильтрация по минимальному количеству мест:
   ```
   GET /rooms/?min_capacity=2
   ```

4. Фильтрация по максимальному количеству мест:
   ```
   GET /rooms/?max_capacity=4
   ```

5. Сортировка по цене (по возрастанию):
   ```
   GET /rooms/?ordering=price_per_night
   ```

6. Сортировка по цене (по убыванию):
   ```
   GET /rooms/?ordering=-price_per_night
   ```

7. Сортировка по количеству мест (по возрастанию):
   ```
   GET /rooms/?ordering=capacity
   ```

8. Сортировка по количеству мест (по убыванию):
   ```
   GET /rooms/?ordering=-capacity
   ```

9. Комбинированная фильтрация и сортировка:
   ```
   GET /rooms/?min_price=100&max_price=200&min_capacity=2&max_capacity=4&ordering=price_per_night,capacity
   ```

## Бронирования

### Просмотр своих бронирований

**URL:** `/bookings/`

**Метод:** `GET`

**Описание:** Возвращает список всех бронирований текущего пользователя. Требуется авторизация.

**Пример ответа:**

```json
[
    {
        "id": 1,
        "user": 1,
        "room": 1,
        "start_date": "2024-07-01",
        "end_date": "2024-07-10"
    },
    {
        "id": 2,
        "user": 1,
        "room": 2,
        "start_date": "2024-08-01",
        "end_date": "2024-08-05"
    }
]
```

### Создание бронирования

**URL:** `/bookings/book-room/`

**Метод:** `POST`

**Описание:** Создает новое бронирование для текущего пользователя. Требуется авторизация.

**Пример запроса:**

```json
{
    "room": 1,
    "start_date": "2024-07-01",
    "end_date": "2024-07-10"
}
```

**Пример ответа:**

```json
{
    "message": "Room booked successfully."
}
```

### Отмена бронирования

**URL:** `/bookings/{id}/cancel/`

**Метод:** `POST`

**Описание:** Отменяет бронирование. Требуется авторизация. Пользователь может отменить только свои бронирования или он должен быть суперпользователем.

**Пример запроса:**

```
POST /bookings/1/cancel/
```

**Пример ответа:**

```json
{
    "message": "Booking cancelled successfully."
}
```

## Определения моделей

### Room

- `id` (integer): Уникальный идентификатор комнаты.
- `room` (string): Название комнаты.
- `price_per_night` (decimal): Цена за ночь.
- `capacity` (integer): Количество мест.

### Booking

- `id` (integer): Уникальный идентификатор бронирования.
- `user` (foreign key): Ссылка на пользователя, который сделал бронирование.
- `room` (foreign key): Ссылка на забронированную комнату.
- `start_date` (date): Дата начала бронирования.
- `end_date` (date): Дата окончания бронирования.
